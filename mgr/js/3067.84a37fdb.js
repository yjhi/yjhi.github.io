(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[3067],{42615:function(e,t,a){var r=1/0,n=9007199254740991,s="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",l="[object Symbol]",c="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")();function p(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function m(e,t){var a=-1,r=e?e.length:0,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}function f(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var v=Object.prototype,h=v.hasOwnProperty,b=v.toString,y=d.Symbol,w=v.propertyIsEnumerable,g=y?y.isConcatSpreadable:void 0,x=Math.max;function _(e,t,a,r,n){var s=-1,o=e.length;a||(a=R),n||(n=[]);while(++s<o){var i=e[s];t>0&&a(i)?t>1?_(i,t-1,a,r,n):f(n,i):r||(n[n.length]=i)}return n}function C(e,t){return e=Object(e),k(e,t,(function(t,a){return a in e}))}function k(e,t,a){var r=-1,n=t.length,s={};while(++r<n){var o=t[r],i=e[o];a(i,o)&&(s[o]=i)}return s}function j(e,t){return t=x(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,n=x(a.length-t,0),s=Array(n);while(++r<n)s[r]=a[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=a[r];return o[t]=s,p(e,this,o)}}function R(e){return O(e)||F(e)||!!(g&&e&&e[g])}function S(e){if("string"==typeof e||T(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function F(e){return K(e)&&h.call(e,"callee")&&(!w.call(e,"callee")||b.call(e)==s)}var O=Array.isArray;function I(e){return null!=e&&Z(e.length)&&!N(e)}function K(e){return P(e)&&I(e)}function N(e){var t=A(e)?b.call(e):"";return t==o||t==i}function Z(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function P(e){return!!e&&"object"==typeof e}function T(e){return"symbol"==typeof e||P(e)&&b.call(e)==l}var V=j((function(e,t){return null==e?{}:C(e,m(_(t,1),S))}));e.exports=V},96503:function(e,t,a){"use strict";a.d(t,{CZ:function(){return l},JV:function(){return s},Zu:function(){return i},qM:function(){return o}});var r=a(50340),n={user:"/user",role:"/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree"};function s(e){return(0,r.ZP)({url:n.role,method:"get",params:e})}function o(e){return(0,r.ZP)({url:n.service,method:"get",params:e})}function i(e){return(0,r.ZP)({url:n.permissionNoPager,method:"get",params:e})}function l(e){return(0,r.ZP)({url:n.orgTree,method:"get",params:e})}},23067:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"角色ID"}},[t("a-input",{attrs:{placeholder:"请输入"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("a-select",{attrs:{placeholder:"请选择","default-value":"0"}},[t("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),t("a-select-option",{attrs:{value:"1"}},[e._v("关闭")]),t("a-select-option",{attrs:{value:"2"}},[e._v("运行中")])],1)],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-button",{attrs:{type:"primary"}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")])],1)])],1)],1)],1),t("s-table",{attrs:{"row-key":"id",size:"default",columns:e.columns,data:e.loadData,expandedRowKeys:e.expandedRowKeys},on:{expand:e.handleExpand},scopedSlots:e._u([{key:"expandedRowRender",fn:function(a){return t("div",{staticStyle:{margin:"0"}},[t("a-row",{style:{marginBottom:"12px"},attrs:{gutter:24}},e._l(a.permissions,(function(a,r){return t("a-col",{key:r,style:{marginBottom:"12px",height:"23px"},attrs:{span:12}},[t("a-col",{attrs:{lg:4,md:24}},[t("span",[e._v(e._s(a.permissionName)+"：")])]),a.actionList&&a.actionList.length>0?t("a-col",{attrs:{lg:20,md:24}},e._l(a.actionList,(function(a){return t("a-tag",{key:a,attrs:{color:"cyan"}},[e._v(e._s(e._f("permissionFilter")(a)))])})),1):t("a-col",{attrs:{span:20}},[e._v("-")])],1)})),1)],1)}},{key:"status",fn:function(a){return t("a-tag",{attrs:{color:"blue"}},[e._v(e._s(e._f("statusFilter")(a)))])}},{key:"createTime",fn:function(a){return t("span",{},[e._v(e._s(e._f("moment")(a)))])}},{key:"action",fn:function(a,r){return t("span",{},[t("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-dropdown",[t("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),t("a-icon",{attrs:{type:"down"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("a",{attrs:{href:"javascript:;"}},[e._v("详情")])]),t("a-menu-item",[t("a",{attrs:{href:"javascript:;"}},[e._v("禁用")])]),t("a-menu-item",[t("a",{attrs:{href:"javascript:;"}},[e._v("删除")])])],1)],1)],1)}}])}),t("a-modal",{staticStyle:{top:"20px"},attrs:{title:"操作",width:800},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("a-form",{staticClass:"permission-form",attrs:{form:e.form}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"唯一识别码",hasFeedback:"",validateStatus:"success"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{placeholder:"唯一识别码",disabled:"disabled"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"角色名称",hasFeedback:"",validateStatus:"success"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],attrs:{placeholder:"起一个名字"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态",hasFeedback:"",validateStatus:"warning"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1}],expression:"['status', { initialValue: 1 }]"}]},[t("a-select-option",{attrs:{value:1}},[e._v("正常")]),t("a-select-option",{attrs:{value:2}},[e._v("禁用")])],1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"描述",hasFeedback:""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{rows:5,placeholder:"...",id:"describe"}})],1),t("a-divider",[e._v("拥有权限")]),e._l(e.permissions,(function(a){return[a.actionsOptions&&a.actionsOptions.length>0?t("a-form-item",{key:a.permissionId,staticClass:"permission-group",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:a.permissionName}},[t("a-checkbox",[e._v("全选")]),t("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["permissions.".concat(a.permissionId)],expression:"[`permissions.${permission.permissionId}`]"}],attrs:{options:a.actionsOptions}})],1):e._e()]}))],2)],1)],1)},n=[],s=a(22368),o=(a(54286),a(77531),a(59241),a(42615)),i=a.n(o),l=a(75811),c=a(96503),u=a(39794),d={1:"启用",2:"禁用"},p=[{title:"唯一识别码",dataIndex:"id"},{title:"角色名称",dataIndex:"name"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"},sorter:!0},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],m={name:"TableList",components:{STable:l.m7},data:function(){var e=this;return{description:"列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。",visible:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),permissions:[],advanced:!1,queryParam:{},columns:p,loadData:function(t){return(0,c.JV)(t).then((function(t){return e.expandedRowKeys=t.result.data.map((function(e){return e.id})),t.result}))},expandedRowKeys:[],selectedRowKeys:[],selectedRows:[]}},filters:{statusFilter:function(e){return d[e]},permissionFilter:function(e){var t=u.n[e];return t&&t.label}},created:function(){(0,c.qM)().then((function(e){})),(0,c.JV)().then((function(e){}))},methods:{handleEdit:function(e){var t=this;this.visible=!0;var a={};this.permissions=e.permissions.map((function(e){var t="permissions.".concat(e.permissionId);a[t]=e.actionList;var r=e.actionEntitySet.map((function(e){return{label:e.describe,value:e.action,defaultCheck:e.defaultCheck}}));return(0,s.Z)((0,s.Z)({},e),{},{actionsOptions:r})})),this.$nextTick((function(){t.form.setFieldsValue(i()(e,["id","status","describe","name"])),t.form.setFieldsValue(a)}))},handleOk:function(e){e.preventDefault(),this.form.validateFields((function(e,t){}))},onChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleExpand:function(e,t){e?this.expandedRowKeys.push(t.id):this.expandedRowKeys=this.expandedRowKeys.filter((function(e){return t.id!==e}))},toggleAdvanced:function(){this.advanced=!this.advanced}},watch:{}},f=m,v=a(78302),h=(0,v.Z)(f,r,n,!1,null,"d7b87932",null),b=h.exports}}]);