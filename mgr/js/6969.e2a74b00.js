(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[6969],{42615:function(t,e,a){var r=1/0,n=9007199254740991,o="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]",c="[object Symbol]",l="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,d="object"==typeof self&&self&&self.Object===Object&&self,u=l||d||Function("return this")();function m(t,e,a){switch(a.length){case 0:return t.call(e);case 1:return t.call(e,a[0]);case 2:return t.call(e,a[0],a[1]);case 3:return t.call(e,a[0],a[1],a[2])}return t.apply(e,a)}function h(t,e){var a=-1,r=t?t.length:0,n=Array(r);while(++a<r)n[a]=e(t[a],a,t);return n}function f(t,e){var a=-1,r=e.length,n=t.length;while(++a<r)t[n+a]=e[a];return t}var p=Object.prototype,y=p.hasOwnProperty,g=p.toString,v=u.Symbol,w=p.propertyIsEnumerable,b=v?v.isConcatSpreadable:void 0,k=Math.max;function C(t,e,a,r,n){var o=-1,i=t.length;a||(a=P),n||(n=[]);while(++o<i){var s=t[o];e>0&&a(s)?e>1?C(s,e-1,a,r,n):f(n,s):r||(n[n.length]=s)}return n}function D(t,e){return t=Object(t),S(t,e,(function(e,a){return a in t}))}function S(t,e,a){var r=-1,n=e.length,o={};while(++r<n){var i=e[r],s=t[i];a(s,i)&&(o[i]=s)}return o}function x(t,e){return e=k(void 0===e?t.length-1:e,0),function(){var a=arguments,r=-1,n=k(a.length-e,0),o=Array(n);while(++r<n)o[r]=a[e+r];r=-1;var i=Array(e+1);while(++r<e)i[r]=a[r];return i[e]=o,m(t,this,i)}}function P(t){return R(t)||L(t)||!!(b&&t&&t[b])}function _(t){if("string"==typeof t||j(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}function L(t){return $(t)&&y.call(t,"callee")&&(!w.call(t,"callee")||g.call(t)==o)}var R=Array.isArray;function q(t){return null!=t&&F(t.length)&&!Z(t)}function $(t){return E(t)&&q(t)}function Z(t){var e=M(t)?g.call(t):"";return e==i||e==s}function F(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function M(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function E(t){return!!t&&"object"==typeof t}function j(t){return"symbol"==typeof t||E(t)&&g.call(t)==c}var Y=x((function(t,e){return null==t?{}:D(t,h(C(e,1),_))}));t.exports=Y},97045:function(t,e,a){"use strict";a.d(e,{BS:function(){return o},CF:function(){return d},C_:function(){return f},FG:function(){return m},FW:function(){return l},G4:function(){return u},JJ:function(){return i},V6:function(){return h},gM:function(){return s},wc:function(){return c}});var r=a(50340),n={DayLogList:"/daylog/list",DayLogAdd:"/daylog/add",DayLogDel:"/daylog/del",DayLogEdit:"/daylog/edit",DayLogCopy:"/daylog/copy",TinyUrlList:"/tinyurl/list",TinyUrlAdd:"/tinyurl/add",TinyUrlEdit:"/tinyurl/edit",MarkdownList:"/markdown/list",MarkdownNew:"/markdown/new",MarkdownLocalNew:"/md/new"};function o(t){return(0,r.ZP)({url:n.DayLogAdd,method:"post",data:t})}function i(t){return(0,r.ZP)({url:n.DayLogEdit,method:"post",data:t})}function s(t){return(0,r.ZP)({url:n.DayLogDel,method:"post",data:t})}function c(t){return(0,r.ZP)({url:n.DayLogList,method:"post",data:t})}function l(t){return(0,r.ZP)({url:n.TinyUrlList,method:"post",data:t})}function d(t){return(0,r.ZP)({url:n.TinyUrlAdd,method:"post",data:t})}function u(t){return(0,r.ZP)({url:n.TinyUrlEdit,method:"post",data:t})}function m(t){return(0,r.ZP)({url:n.MarkdownList,method:"post",data:t})}function h(t){return(0,r.ZP)({url:n.MarkdownNew+"?title="+t,method:"get"})}function f(t){return(0,r.ZP)({url:n.MarkdownLocalNew+"?title="+t,method:"get"})}},6969:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return q}});var r=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e(t.currentComponet,{tag:"component",attrs:{record:t.record},on:{onEdit:t.handleEdit,onGoBack:t.handleGoBack}})],1)},n=[],o=a(37344),i=a(6899),s=(a(77531),a(59241),function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:48}},[e("a-col",{attrs:{md:12,sm:18}},[e("a-form-item",{attrs:{label:"内容"}},[e("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.filter,callback:function(e){t.$set(t.queryParam,"filter",e)},expression:"queryParam.filter"}})],1)],1),e("a-col",{attrs:{md:12,sm:24}},[e("a-form-item",{attrs:{label:"查询日期"}},[e("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:t.dateFormat},model:{value:t.queryParam.dateRange,callback:function(e){t.$set(t.queryParam,"dateRange",e)},expression:"queryParam.dateRange"}})],1)],1),e("a-col",{attrs:{md:12,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)])],1)],1)],1),e("div",{staticClass:"table-operator"},[e("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleEdit()}}},[t._v("新建")]),t.selectedRowKeys.length>0?e("a-button",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],attrs:{type:"danger",icon:"delete"},on:{click:function(e){return t.handleBatchDelete()}}},[t._v("删除")]):t._e(),t.selectedRowKeys.length>0?e("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{icon:"copy"},on:{click:function(e){return t.handleCopySel()}}},[t._v("复制选择")]):t._e(),t.selectedRowKeys.length>0?e("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{icon:"copy"},on:{click:function(e){return t.handleCopyNoSel()}}},[t._v("复制未选择")]):t._e()],1),e("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:t.columns,data:t.loadData,alert:t.options.alert,rowSelection:t.options.rowSelection},scopedSlots:t._u([{key:"serial",fn:function(a,r,n){return e("span",{},[t._v(" "+t._s(n+1)+" ")])}},{key:"action",fn:function(a,r){return e("span",{},[[t.$auth("daylog.update")?e("a",{on:{click:function(e){return t.handleEdit(r)}}},[t._v("编辑")]):t._e(),e("a-divider",{attrs:{type:"vertical"}}),t.$auth("daylog.delete")?e("a",{staticStyle:{color:"red"},on:{click:function(e){return t.handleDelete(r)}}},[t._v("删除")]):t._e()]],2)}}])})],1)}),c=[],l=a(98777),d=a.n(l),u=a(75811),m=a(97045),h=a(91265),f={name:"TableList",components:{STable:u.m7},data:function(){var t=this;return{dateFormat:"YYYY-MM-DD",mdl:{},advanced:!1,queryParam:{dateRange:[]},cacheData:[],columns:[{title:"#",scopedSlots:{customRender:"serial"}},{title:"日期",dataIndex:"date",sorter:!0,width:"160px"},{title:"内容",dataIndex:"data",ellispis:!0,customCell:function(){return{style:{wordWrap:"break-word",wordBreak:"break-all",whiteSpace:"normal",minWidth:"140px",maxHeight:"100px"}}}},{title:"星期",dataIndex:"day",sorter:!0},{title:"添加时间",dataIndex:"createdAt",sorter:!0,width:"160px"},{title:"操作",dataIndex:"action",width:"110px",scopedSlots:{customRender:"action"}}],loadData:function(e){return null!=t.queryParam.dateRange&&2===t.queryParam.dateRange.length?(t.queryParam.start=d()(t.queryParam.dateRange[0]).format(t.dateFormat),t.queryParam.stop=d()(t.queryParam.dateRange[1]).format(t.dateFormat)):(t.queryParam.start="",t.queryParam.stop=""),(0,m.wc)(Object.assign(e,t.queryParam)).then((function(e){return t.cacheData=e.result.data,e.result}))},selectedRowKeys:[],selectedRows:[],options:{alert:{show:!0,clear:function(){t.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},optionAlertShow:!1}},created:function(){this.queryParam.dateRange=[this.getCurDate(),this.getCurDate()]},methods:{moment:d(),getCurDate:function(){return d()((new Date).toLocaleDateString()).format(this.dateFormat)},handleEdit:function(t){this.$emit("onEdit",t)},handleOk:function(){},handleCopySel:function(){var t=this;if(this.selectedRows.length>0){for(var e=this.selectedRows,a="",r=0;r<e.length;r++)a+=r+1+"."+e[r].data+";\n";this.$copyText(a).then((function(e){t.$message.success("复制成功")})).catch((function(e){t.$message.error("复制失败")}))}},handleCopyNoSel:function(){var t=this;if(void 0!==this.cacheData&&this.cacheData.length!==this.selectedRowKeys.length){for(var e="",a=0,r=this.cacheData,n=0;n<r.length;n++)-1===this.selectedRowKeys.indexOf(r[n].id)&&(e+=a+1+"."+r[n].data+";\n",a++);this.$copyText(e).then((function(e){t.$message.success("复制成功")})).catch((function(e){t.$message.error("复制失败")}))}},handleDelete:function(t){var e=this,a=this;(0,m.gM)({id:[t.id]}).then((function(t){0!==t.code?h.Z.error({message:"错误",description:t.message}):(e.$message.success("删除成功"),a.$refs.table.refresh(!0))}))},handleBatchDelete:function(){var t=this,e=this;(0,m.gM)({id:e.selectedRowKeys}).then((function(a){0!==a.code?h.Z.error({message:"错误",description:a.message}):(t.$message.success("删除成功"),e.$refs.table.refresh(!0))}))},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={}}}},p=f,y=a(78302),g=(0,y.Z)(p,s,c,!1,null,null,null),v=g.exports,w=function(){var t=this,e=t._self._c;return e("div",[e("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[e("a-form-item",[e("h2",[t._v(t._s(null!=t.record.id?"编辑":"新增"))])]),e("a-form-item",{directives:[{name:"show",rawName:"v-show",value:null!=t.record.Id,expression:"record.Id!=null"}],attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"ID",hasFeedback:"",validateStatus:"success"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{placeholder:"",disabled:!0}})],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"内容",hasFeedback:"",help:"请填写文本"}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["data",{rules:[{required:!0}]}],expression:"['data', {rules: [{ required: true }]}]"}],attrs:{rows:5,placeholder:"..."}})],1),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"日期",hasFeedback:"",validateStatus:"error"}},[e("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["date",{rules:[{required:!0,message:"日期不能为空"}]}],expression:"['date', {rules: [{ required: true, message: '日期不能为空' }]}]"}],staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"Select Time"}})],1),e("a-form-item",t._b({},"a-form-item",t.buttonCol,!1),[e("a-row",[e("a-col",{attrs:{span:"6"}},[e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v("提交")])],1),e("a-col",{attrs:{span:"10"}},[e("a-button",{on:{click:t.handleGoBack}},[t._v("返回")])],1),e("a-col",{attrs:{span:"8"}})],1)],1)],1)],1)},b=[],k=a(42615),C=a.n(k),D={name:"DayLogListEdit",props:{record:{type:[Object,String],default:""}},data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}},buttonCol:{wrapperCol:{xs:{span:24},sm:{span:12,offset:5}}},form:this.$form.createForm(this),id:0}},mounted:function(){var t=this;this.$nextTick((function(){t.loadEditInfo(t.record)}))},methods:{handleGoBack:function(){this.$emit("onGoBack")},handleSubmit:function(t){var e=this,a=this;t.preventDefault();var r=this.form.validateFields;r((function(t,r){t?h.Z.error({message:"错误",description:t.message}):null!=a.record.id?(0,m.JJ)({id:e.record.id,data:r.data,date:r.date.format("YYYY-MM-DD HH:mm:ss")}).then((function(t){0!==t.code?h.Z.error({message:"错误",description:t.message}):(e.$message.success("更新成功"),a.handleGoBack())})):(0,m.BS)({data:r.data,date:r.date.format("YYYY-MM-DD HH:mm:ss")}).then((function(t){0!==t.code?h.Z.error({message:"错误",description:t.message}):(e.$message.success("更新成功"),a.handleGoBack())}))}))},handleGetInfo:function(){},loadEditInfo:function(t){var e=this.form;new Promise((function(t){setTimeout(t,200)})).then((function(){var a=C()(t,["id","data","date"]);a.date=d()(t.date),e.setFieldsValue(a)}))}}},S=D,x=(0,y.Z)(S,w,b,!1,null,null,null),P=x.exports,_={name:"DayLogList",components:{AInput:i.ZP,ATextarea:o.Z,List:v,Edit:P},data:function(){return{currentComponet:"List",record:""}},created:function(){},methods:{handleEdit:function(t){this.record=t||"",this.currentComponet="Edit"},handleGoBack:function(){this.record="",this.currentComponet="List"}},watch:{"$route.path":function(){this.record="",this.currentComponet="List"}}},L=_,R=(0,y.Z)(L,r,n,!1,null,null,null),q=R.exports}}]);