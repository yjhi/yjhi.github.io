(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[7795],{42615:function(e,t,r){var n=1/0,a=9007199254740991,o="[object Arguments]",l="[object Function]",i="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")();function p(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function f(e,t){var r=-1,n=e?e.length:0,a=Array(n);while(++r<n)a[r]=t(e[r],r,e);return a}function m(e,t){var r=-1,n=t.length,a=e.length;while(++r<n)e[a+r]=t[r];return e}var h=Object.prototype,v=h.hasOwnProperty,y=h.toString,b=d.Symbol,w=h.propertyIsEnumerable,g=b?b.isConcatSpreadable:void 0,C=Math.max;function k(e,t,r,n,a){var o=-1,l=e.length;r||(r=L),a||(a=[]);while(++o<l){var i=e[o];t>0&&r(i)?t>1?k(i,t-1,r,n,a):m(a,i):n||(a[a.length]=i)}return a}function x(e,t){return e=Object(e),_(e,t,(function(t,r){return r in e}))}function _(e,t,r){var n=-1,a=t.length,o={};while(++n<a){var l=t[n],i=e[l];r(i,l)&&(o[l]=i)}return o}function S(e,t){return t=C(void 0===t?e.length-1:t,0),function(){var r=arguments,n=-1,a=C(r.length-t,0),o=Array(a);while(++n<a)o[n]=r[t+n];n=-1;var l=Array(t+1);while(++n<t)l[n]=r[n];return l[t]=o,p(e,this,l)}}function L(e){return F(e)||A(e)||!!(g&&e&&e[g])}function P(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function A(e){return E(e)&&v.call(e,"callee")&&(!w.call(e,"callee")||y.call(e)==o)}var F=Array.isArray;function Z(e){return null!=e&&D(e.length)&&!j(e)}function E(e){return G(e)&&Z(e)}function j(e){var t=U(e)?y.call(e):"";return t==l||t==i}function D(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function U(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function G(e){return!!e&&"object"==typeof e}function N(e){return"symbol"==typeof e||G(e)&&y.call(e)==s}var T=S((function(e,t){return null==e?{}:x(e,f(k(t,1),P))}));e.exports=T},97045:function(e,t,r){"use strict";r.d(t,{BS:function(){return o},CF:function(){return u},C_:function(){return m},FG:function(){return p},FW:function(){return c},G4:function(){return d},JJ:function(){return l},V6:function(){return f},gM:function(){return i},wc:function(){return s}});var n=r(50340),a={DayLogList:"/daylog/list",DayLogAdd:"/daylog/add",DayLogDel:"/daylog/del",DayLogEdit:"/daylog/edit",DayLogCopy:"/daylog/copy",TinyUrlList:"/tinyurl/list",TinyUrlAdd:"/tinyurl/add",TinyUrlEdit:"/tinyurl/edit",MarkdownList:"/markdown/list",MarkdownNew:"/markdown/new",MarkdownLocalNew:"/md/new"};function o(e){return(0,n.ZP)({url:a.DayLogAdd,method:"post",data:e})}function l(e){return(0,n.ZP)({url:a.DayLogEdit,method:"post",data:e})}function i(e){return(0,n.ZP)({url:a.DayLogDel,method:"post",data:e})}function s(e){return(0,n.ZP)({url:a.DayLogList,method:"post",data:e})}function c(e){return(0,n.ZP)({url:a.TinyUrlList,method:"post",data:e})}function u(e){return(0,n.ZP)({url:a.TinyUrlAdd,method:"post",data:e})}function d(e){return(0,n.ZP)({url:a.TinyUrlEdit,method:"post",data:e})}function p(e){return(0,n.ZP)({url:a.MarkdownList,method:"post",data:e})}function f(e){return(0,n.ZP)({url:a.MarkdownNew+"?title="+e,method:"get"})}function m(e){return(0,n.ZP)({url:a.MarkdownLocalNew+"?title="+e,method:"get"})}},77795:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var n=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t(e.currentComponet,{tag:"component",attrs:{record:e.record},on:{onEdit:e.handleEdit,onGoBack:e.handleGoBack}})],1)},a=[],o=r(37344),l=r(6899),i=(r(77531),r(59241),function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"查询"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.filter,callback:function(t){e.$set(e.queryParam,"filter",t)},expression:"queryParam.filter"}})],1)],1),t("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)])],1)],1)],1),t("div",{staticClass:"table-operator"},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("新建")])],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection},scopedSlots:e._u([{key:"serial",fn:function(r,n,a){return t("span",{},[e._v(" "+e._s(a+1)+" ")])}},{key:"tinyurl-slot",fn:function(r,n){return t("span",{},[t("a",{attrs:{href:n.tinyUrl,target:"_blank"}},[e._v(e._s(n.tinyUrl))])])}},{key:"action",fn:function(r,n){return t("span",{},[[t("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(t){return e.handleCopy(n.tinyUrl)}}},[e._v("复制")])]],2)}}])})],1)}),s=[],c=r(98777),u=r.n(c),d=r(75811),p=r(97045),f={name:"TinyUrlListCtrl",components:{STable:d.m7},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"#",scopedSlots:{customRender:"serial"}},{title:"短链接",dataIndex:"tinyUrl",scopedSlots:{customRender:"tinyurl-slot"},sorter:!0},{title:"链接",dataIndex:"url",customCell:function(){return{style:{wordWrap:"break-word",wordBreak:"break-all",whiteSpace:"normal",minWidth:"140px",maxHeight:"100px"}}},sorter:!0},{title:"备注",dataIndex:"label",width:"160px",sorter:!0},{title:"操作",dataIndex:"action",width:"110px",scopedSlots:{customRender:"action"}}],loadData:function(t){return(0,p.FW)(Object.assign(t,e.queryParam)).then((function(e){return e.result}))},selectedRowKeys:[],selectedRows:[],options:{alert:{show:!0,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},optionAlertShow:!1}},created:function(){},methods:{handleEdit:function(e){this.$emit("onEdit",e)},handleCopy:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("复制成功")})).catch((function(e){t.$message.error("复制失败")}))},handleOk:function(){},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:u()(new Date)}}}},m=f,h=r(78302),v=(0,h.Z)(m,i,s,!1,null,null,null),y=v.exports,b=function(){var e=this,t=e._self._c;return t("div",[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",[t("h2",[e._v(e._s(null!=e.record.id?"编辑":"新增"))])]),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:null!=e.record.id,expression:"record.id != null"}],attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"ID",hasFeedback:"",validateStatus:"success"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{placeholder:"",disabled:!0}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:null!=e.record.id,expression:"record.id != null"}],attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"短链接",hasFeedback:"",validateStatus:"success"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tinyUrl"],expression:"['tinyUrl']"}],attrs:{placeholder:"",disabled:!0}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"链接",hasFeedback:"",help:"输入需要转换的长链接"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0}]}],expression:"['url', { rules: [{ required: true }] }]"}],attrs:{rows:5,placeholder:"..."}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注",hasFeedback:"",help:"输入备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["label"],expression:"['label']"}],attrs:{rows:2,placeholder:"..."}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:null!=e.record.id,expression:"record.id != null"}],attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"添加时间",hasFeedback:"",validateStatus:"success"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["createdAt"],expression:"['createdAt']"}],attrs:{placeholder:"",disabled:!0}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:null!=e.record.id,expression:"record.id != null"}],attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"来源",hasFeedback:"",validateStatus:"success"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["source"],expression:"['source']"}],attrs:{placeholder:"",disabled:!0}})],1),t("a-form-item",e._b({},"a-form-item",e.buttonCol,!1),[t("a-row",[t("a-col",{attrs:{span:"6"}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1),t("a-col",{attrs:{span:"10"}},[t("a-button",{on:{click:e.handleGoBack}},[e._v("返回")])],1),t("a-col",{attrs:{span:"8"}})],1)],1)],1)],1)},w=[],g=r(42615),C=r.n(g),k=r(91265),x={name:"TinyUrlEditCtrl",props:{record:{type:[Object,String],default:""}},data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}},buttonCol:{wrapperCol:{xs:{span:24},sm:{span:12,offset:5}}},form:this.$form.createForm(this),id:0}},mounted:function(){var e=this;this.$nextTick((function(){e.loadEditInfo(e.record)}))},methods:{handleGoBack:function(){this.$emit("onGoBack")},handleSubmit:function(e){var t=this,r=this;e.preventDefault();var n=this.form.validateFields;n((function(e,n){e?k.Z.error({message:"错误",description:e.message}):null!=r.record.id?(0,p.G4)({id:t.record.id,url:n.url,source:"MGR",label:n.label}).then((function(e){0!==e.code?k.Z.error({message:"错误",description:e.message}):(t.$message.success("更新成功"),r.handleGoBack())})):(0,p.CF)({url:n.url,source:"MGR",label:n.label}).then((function(e){0!==e.code?k.Z.error({message:"错误",description:e.message}):(t.$message.success("更新成功"),r.handleGoBack())}))}))},handleGetInfo:function(){},loadEditInfo:function(e){var t=this.form;new Promise((function(e){setTimeout(e,200)})).then((function(){var r=C()(e,["id","url","label","tinyUrl","createdAt","source"]);r.updatedAt=u()(e.updatedAt),t.setFieldsValue(r)}))}}},_=x,S=(0,h.Z)(_,b,w,!1,null,null,null),L=S.exports,P={name:"TinyUrlList",components:{AInput:l.ZP,ATextarea:o.Z,List:y,Edit:L},data:function(){return{currentComponet:"List",record:""}},created:function(){},methods:{handleEdit:function(e){this.record=e||"",this.currentComponet="Edit"},handleGoBack:function(){this.record="",this.currentComponet="List"}},watch:{"$route.path":function(){this.record="",this.currentComponet="List"}}},A=P,F=(0,h.Z)(A,n,a,!1,null,null,null),Z=F.exports}}]);